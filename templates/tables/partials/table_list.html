{% load i18n %}

<!-- OOB Tabbar Update -->
<ion-footer hx-swap-oob="innerHTML:#section-tabbar">
{% include "tables/partials/tabbar.html" with current_view='tables' %}
</ion-footer>

<ion-content class="ion-padding">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
        <div>
            <h1 class="text-2xl font-bold text-gray-900">{% trans "Tables" %}</h1>
            <p class="text-gray-500">{% trans "Manage all tables" %}</p>
        </div>
        <ion-button
            hx-get="{% url 'tables:table_create' %}"
            hx-target="#dashboard-content"
            hx-push-url="true">
            <ion-icon slot="start" name="add"></ion-icon>
            {% trans "New Table" %}
        </ion-button>
    </div>

    <!-- Tables Grid -->
    <ion-card>
        <ion-card-content class="p-0">
            <ion-list>
                {% for table in tables %}
                <ion-item
                    button
                    hx-get="{% url 'tables:table_edit' pk=table.pk %}"
                    hx-target="#dashboard-content"
                    hx-push-url="true">
                    <div slot="start" class="w-12 h-12 rounded-lg flex items-center justify-center text-xl font-bold
                        {% if table.status == 'available' %}bg-green-100 text-green-700{% endif %}
                        {% if table.status == 'occupied' %}bg-red-100 text-red-700{% endif %}
                        {% if table.status == 'reserved' %}bg-yellow-100 text-yellow-700{% endif %}
                        {% if table.status == 'blocked' %}bg-gray-100 text-gray-500{% endif %}">
                        {{ table.number }}
                    </div>
                    <ion-label>
                        <h2>{% trans "Table" %} {{ table.number }}{% if table.name %} - {{ table.name }}{% endif %}</h2>
                        <p>
                            {% if table.area %}{{ table.area.name }} | {% endif %}
                            <ion-icon name="people"></ion-icon> {{ table.capacity }} {% trans "seats" %}
                        </p>
                    </ion-label>
                    <ion-badge slot="end"
                        {% if table.status == 'available' %}color="success"{% endif %}
                        {% if table.status == 'occupied' %}color="danger"{% endif %}
                        {% if table.status == 'reserved' %}color="warning"{% endif %}
                        {% if table.status == 'blocked' %}color="medium"{% endif %}>
                        {{ table.get_status_display }}
                    </ion-badge>
                </ion-item>
                {% empty %}
                <div class="text-center py-12">
                    <ion-icon name="cafe-outline" class="text-6xl text-gray-300 mb-4"></ion-icon>
                    <p class="text-gray-500 mb-4">{% trans "No tables defined" %}</p>
                    <ion-button
                        hx-get="{% url 'tables:table_create' %}"
                        hx-target="#dashboard-content"
                        hx-push-url="true">
                        <ion-icon slot="start" name="add"></ion-icon>
                        {% trans "Add First Table" %}
                    </ion-button>
                </div>
                {% endfor %}
            </ion-list>
        </ion-card-content>
    </ion-card>
</ion-content>
