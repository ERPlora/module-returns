{% load i18n %}

<!-- OOB Tabbar Update -->
<ion-footer hx-swap-oob="innerHTML:#section-tabbar">
{% include "tables/partials/tabbar.html" with current_view='floor' %}
</ion-footer>

<ion-content class="ion-padding">
    <!-- Header -->
    <div class="flex items-center gap-4 mb-6">
        <ion-button
            fill="clear"
            hx-get="{% url 'tables:floor_view' %}"
            hx-target="#dashboard-content"
            hx-push-url="true">
            <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
        </ion-button>
        <div>
            <h1 class="text-2xl font-bold text-gray-900">{% trans "Open Table" %} {{ table.number }}</h1>
            <p class="text-gray-500">
                {% if table.area %}{{ table.area.name }} | {% endif %}
                {% trans "Capacity:" %} {{ table.capacity }}
            </p>
        </div>
    </div>

    <ion-card>
        <ion-card-content>
            <form method="post"
                hx-post="{% url 'tables:table_open' pk=table.pk %}"
                hx-target="#dashboard-content">
                {% csrf_token %}

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Guests -->
                    <div>
                        <ion-label class="text-sm text-gray-600">{% trans "Number of Guests" %}</ion-label>
                        <ion-input
                            type="number"
                            name="guests"
                            value="{{ table.capacity }}"
                            min="1"
                            max="{{ table.capacity }}"
                            class="mt-1">
                        </ion-input>
                    </div>

                    <!-- Waiter -->
                    <div>
                        <ion-label class="text-sm text-gray-600">{% trans "Waiter/Server" %}</ion-label>
                        <ion-input
                            name="waiter"
                            placeholder="{% trans 'Optional' %}"
                            class="mt-1">
                        </ion-input>
                    </div>
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4">
                    <div class="flex items-center gap-2 text-blue-700">
                        <ion-icon name="information-circle"></ion-icon>
                        <span>{% trans "Opening the table will create a new sale linked to this table." %}</span>
                    </div>
                </div>

                <!-- Actions -->
                <div class="flex justify-end gap-3 mt-6 pt-4 border-t">
                    <ion-button
                        fill="outline"
                        color="medium"
                        hx-get="{% url 'tables:floor_view' %}"
                        hx-target="#dashboard-content"
                        hx-push-url="true">
                        {% trans "Cancel" %}
                    </ion-button>
                    <ion-button type="submit" color="success">
                        <ion-icon slot="start" name="play"></ion-icon>
                        {% trans "Open Table & Start Sale" %}
                    </ion-button>
                </div>
            </form>
        </ion-card-content>
    </ion-card>
</ion-content>
