{% load static i18n ui component_tags %}

{% component "page"
    title=_("Returns Settings")
    subtitle=_("Configure returns module behavior")
    module_id="returns"
    tabbar_view="settings" %}

    {% fill "content" %}
        {% csrf_token %}

        <!-- Return Policies Section -->
        <ion-card class="m-0 mb-4">
            <ion-card-header>
                <ion-card-title>{% trans "Return Policies" %}</ion-card-title>
            </ion-card-header>
            <ion-card-content class="p-0">
                <ion-list>
                    <ion-item>
                        {% component "toggle"
                            name="allow_returns"
                            checked=config.allow_returns
                            title=_("Allow Returns")
                            description=_("Enable product returns processing")
                            hx_post=returns_toggle_url %}
                        {% endcomponent %}
                    </ion-item>
                    <ion-item>
                        {% component "toggle"
                            name="require_receipt"
                            checked=config.require_receipt
                            color="warning"
                            title=_("Require Receipt")
                            description=_("Require original receipt for returns")
                            hx_post=returns_toggle_url %}
                        {% endcomponent %}
                    </ion-item>
                    <ion-item>
                        {% component "toggle"
                            name="allow_store_credit"
                            checked=config.allow_store_credit
                            title=_("Allow Store Credit")
                            description=_("Allow refunds as store credit instead of cash")
                            hx_post=returns_toggle_url %}
                        {% endcomponent %}
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>

        <!-- Return Window Section -->
        <ion-card class="m-0 mb-4">
            <ion-card-header>
                <ion-card-title>{% trans "Return Window" %}</ion-card-title>
            </ion-card-header>
            <ion-card-content class="p-0">
                <ion-list>
                    <ion-item>
                        {% component "input_field"
                            name="return_window_days"
                            type="number"
                            value=config.return_window_days
                            min=0
                            max=365
                            label=_("Return Window (Days)")
                            helper_text=_("Number of days after sale to allow returns (0 = unlimited)")
                            hx_post=returns_input_url %}
                        {% endcomponent %}
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>

        <!-- Inventory Section -->
        <ion-card class="m-0 mb-4">
            <ion-card-header>
                <ion-card-title>{% trans "Inventory" %}</ion-card-title>
            </ion-card-header>
            <ion-card-content class="p-0">
                <ion-list>
                    <ion-item>
                        {% component "toggle"
                            name="auto_restore_stock"
                            checked=config.auto_restore_stock
                            title=_("Auto Restore Stock")
                            description=_("Automatically restore inventory when return is processed")
                            hx_post=returns_toggle_url %}
                        {% endcomponent %}
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>

        <!-- Reset Button -->
        <div class="mt-lg pt-md" style="border-top: 1px solid var(--border-color);">
            <ion-button
                color="medium"
                fill="outline"
                expand="block"
                hx-post="{% url 'returns:settings_reset' %}"
                hx-include="[name='csrfmiddlewaretoken']"
                hx-swap="none"
                hx-confirm="{% trans 'Reset all settings to defaults?' %}">
                <ion-icon slot="start" name="refresh-outline"></ion-icon>
                {% trans "Reset to Defaults" %}
            </ion-button>
        </div>
    {% endfill %}
{% endcomponent %}
